!function (o) { "use strict"; function s(e, t, a) { var n = 2 === e.split("?").length ? e.split("?")[0] : e, o = 2 === e.split("?").length ? "?" + e.split("?")[1] : "", s = t + "=" + a, c = "?" + s; if (o) { var l = new RegExp("([?&])" + t + "[^&]*"), r = new RegExp("([?&])" + t + "=[^&;]+[&;]?"); c = null == a || "" === a ? (c = o.replace(r, "$1")).replace(/[&;]$/, "") : null !== o.match(l) ? o.replace(l, "$1" + s) : o + "&" + s } return n + (c = "?" === c ? "" : c) } o(document).ready(function () { function e(e, n) { o(document.body).on("W4_Loggable_" + e + "_add_form/done", function (e, t, a) { console.log(a), t.message ? window.location.href = s(W4_loggable[n], "message", t.message) : window.location.href = s(W4_loggable[n], "message", a.data("success_text")) }), o(document.body).on("W4_Loggable_" + e + "_edit_form/done", function (e, t) { t.success ? window.location.href = s(W4_loggable[n], "message", t.message) : window.location.href = s(W4_loggable[n], "message", e.data("success_text")) }) } function n(e) { var t = ""; return void 0 !== e.text && "" != e.text ? t += e.text : t += e.title, t } o(document.body).on("w4_loggable/datepickerInit", function (e, t) { t.find("input.date_input").each(function () { var e = o(this).data() || { format: "Y-m-d", formatDate: "Y-m-d" }; void 0 !== e.closeondateselect && (e.closeOnDateSelect = !0), void 0 !== e.mindate && (e.minDate = e.mindate), e.scrollInput = !1, e.hours12 = !0, o(this).datetimepicker(e) }) }), o(document.body).trigger("w4_loggable/datepickerInit", [o("body")]), o(document.body).on("click", ".w4_loggable_ca", function () { var e = o(this).data("confirm") || "Are you sure you want to do this ?"; if (!confirm(e)) return !1 }), o(document.body).on("click", ".w4_loggable-toggle-btn", function (e) { o(this); var t = o(this).closest(".w4_loggable-toggle"); t.find(".w4_loggable-toggle-content").is(":visible") ? (t.removeClass("W4_loggable-toggle-active"), t.find(".w4_loggable-toggle-content").slideUp()) : (t.addClass("W4_loggable-toggle-active"), t.find(".w4_loggable-toggle-content").slideDown()), o(document.body).trigger("w4_loggable/toggle", t) }), e("supplier_customer", "supplierCustomersPageUrl"), e("customer_product", "customerProductsPageUrl"), e("supplier", "suppliersPageUrl"), function () { for (var e = ["supplier", "customer", "manager", "product"], t = 0; t < e.length; t++) { var a = e[t]; o(".w4_loggable_select2_" + a).each(function () { var e = o(this), t = { placeholder: "Select " + a, allowClear: !!e.data("select2-allowclear") && e.data("select2-allowclear"), escapeMarkup: function (e) { return e }, templateResult: function (e) { return n(e) }, templateSelection: function (e) { return n(e) } }; e.hasClass("ajax") && (t.minimumInputLength = 1, t.ajax = { url: ajaxurl + "?action=W4_Loggable_select2_" + a + "s", dataType: "json", delay: 250, data: function (e) { return { s: e.term, paged: e.page, per_page: 10 } }, processResults: function (e, t) { return t.page = t.page || 1, t.per_page = t.per_page || 10, { results: e.items, pagination: { more: t.page * t.per_page < e.total } } }, cache: !0 }), e.not(":hidden, .select2-hidden-accessible").select2(t) }) } o(".w4_loggable_select2").each(function () { var e = o(this), t = { placeholder: "Select", allowClear: !!e.data("select2-allowclear") && e.data("select2-allowclear"), escapeMarkup: function (e) { return e }, templateResult: function (e) { return n(e) }, templateSelection: function (e) { return n(e) } }; e.not(":hidden, .select2-hidden-accessible").select2(t) }) }() }) }(jQuery);